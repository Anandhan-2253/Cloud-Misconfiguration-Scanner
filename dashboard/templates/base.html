<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "Cloud Misconfiguration Scanner" }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        base: "#0f172a",
                        panel: "#111827",
                        border: "#1f2933",
                        ink: "#e5e7eb",
                        muted: "#9ca3af",
                        critical: "#dc2626",
                        high: "#f97316",
                        medium: "#eab308",
                        low: "#22c55e"
                    },
                    fontFamily: {
                        sans: ["IBM Plex Sans", "system-ui", "sans-serif"],
                        mono: ["JetBrains Mono", "ui-monospace", "SFMono-Regular"]
                    },
                    boxShadow: {
                        soc: "0 10px 30px rgba(3, 7, 18, 0.45)"
                    }
                }
            }
        }
    </script>
    <style>
        body { background: #0f172a; color: #e5e7eb; }
        .glass-panel { background: rgba(17, 24, 39, 0.9); border: 1px solid #1f2933; }
        .mono { font-family: "JetBrains Mono", ui-monospace, SFMono-Regular; }
        .scrollbar-thin::-webkit-scrollbar { height: 8px; width: 8px; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #1f2933; border-radius: 999px; }
        .heat-cell { transition: transform 0.18s ease, box-shadow 0.18s ease; }
        .heat-cell:hover { transform: translateY(-2px); box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.3); }
        .fade-in { animation: fadeIn 0.45s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px);} to { opacity: 1; transform: translateY(0);} }
    </style>
</head>
<body class="font-sans" data-page="{{ active_page }}">
    <div class="min-h-screen flex">
        <aside class="w-16 bg-[#0b1120] border-r border-border flex flex-col items-center py-6 gap-6">
            <div class="w-9 h-9 rounded-xl bg-panel border border-border flex items-center justify-center text-xs mono tracking-widest">CMS</div>
            <nav class="flex flex-col gap-4">
                <a href="{{ url_for('index') }}" class="w-10 h-10 rounded-xl border border-border flex items-center justify-center {{ 'bg-panel text-ink' if active_page == 'scan' else 'text-muted' }}">S</a>
                <a href="{{ url_for('results') }}" class="w-10 h-10 rounded-xl border border-border flex items-center justify-center {{ 'bg-panel text-ink' if active_page == 'results' else 'text-muted' }}">R</a>
                <a href="{{ url_for('reports') }}" class="w-10 h-10 rounded-xl border border-border flex items-center justify-center {{ 'bg-panel text-ink' if active_page == 'reports' else 'text-muted' }}">P</a>
                <div class="w-10 h-10 rounded-xl border border-border flex items-center justify-center text-muted">G</div>
            </nav>
        </aside>
        <main class="flex-1 px-8 py-8">
            {% block content %}{% endblock %}
        </main>
    </div>

    <div id="toast" class="fixed bottom-6 right-6 hidden">
        <div class="glass-panel px-4 py-3 rounded-lg shadow-soc border border-border text-sm mono" id="toast-message">Scan status</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
